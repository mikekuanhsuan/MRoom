這是一份根據你提供的內容整理而成的技術筆記，將 JOIN 與 EXISTS 的核心差異、運作邏輯及應用場景進行了系統化的梳理。

📝 SQL 筆記：JOIN vs. EXISTS 的本質區別
一、 核心概念對比
特性	JOIN (連結)	EXISTS (存在性檢查)
本質	組合 (Combination)	過濾 (Filtering)
邏輯	將多張表的列「接起來」	判斷條件是否「成立」
運作原理	乘法效應	開關效應（True/False）
二、 運作原理深挖
1. JOIN 的「乘法效應」

當使用 JOIN 時，資料庫會進行笛卡爾積式的關聯。如果關聯表（Sub-tables）中有多筆符合條件的資料，主表的該筆紀錄就會被重複顯示。

計算公式： 主表 (1 筆) × 表A (M 筆) × 表B (N 筆) = M × N 筆結果

現象： 即使你只 SELECT 主表的欄位，結果仍會出現重複列，因為每一行都代表了一個不同的組合。

2. EXISTS 的「開關效應」

EXISTS 僅作為一個布林判斷（Boolean Check）。

邏輯： 資料庫掃描主表，針對每一筆紀錄去子查詢看一眼。

特性： 只要在關聯表中找到「第一筆」符合條件的資料，開關就會打開（傳回 TRUE），並立即停止搜索該關聯表。

現象： 無論關聯表有 1 筆還是 1 萬筆資料，主表的紀錄永遠只會輸出 1 次。

三、 視覺化對比（案例：客戶 A）

假設客戶 A 有 2 個帳戶 與 3 筆交易。

【使用 JOIN】

SQL 會列出所有可能的組合：
| 客戶 ID | 客戶姓名 | 帳戶 (c) | 交易 (b) |
| :--- | :--- | :--- | :--- |
| A001 | 張三 | 美金 | 交易 1 |
| A001 | 張三 | 美金 | 交易 2 |
| A001 | 張三 | 美金 | 交易 3 |
| A001 | 張三 | 日幣 | 交易 1 |
| A001 | 張三 | 日幣 | 交易 2 |
| A001 | 張三 | 日幣 | 交易 3 |

結果： 出現 6 筆（因為左側欄位一直在重複配合右側明細）。

【使用 EXISTS】

SQL 只判斷「有沒有」：
| 客戶 ID | 客戶姓名 |
| :--- | :--- |
| A001 | 張三 |

結果： 只出現 1 筆（因為它不負責接起右側明細）。

四、 什麼時候該用哪種寫法？
1. 使用 JOIN 的時機

需求： 需要顯示關聯表中的具體內容（如：顯示交易金額、帳戶餘額、日期等）。

目的： 獲取跨表的整合資訊。

2. 使用 EXISTS 的時機

需求： 只需要主表的資訊，其他表僅作為篩選門檻。

場景範例：

找出「有過交易紀錄」的客戶名單。

找出「有開立外幣帳戶」的客戶名單。

優勢：

效能更好： 找到第一筆就停止，不需掃描全表或處理大量組合。

不需去重： 避免使用 DISTINCT 造成的額外效能開銷。

五、 總結與金句

JOIN 是為了**「擴充欄位」**：我想知道更多關於這筆資料的細節。

EXISTS 是為了**「縮小範圍」**：我只想知道誰符合這些條件。

專業建議： 如果你的 SELECT 後面只跟著主表的欄位，且只是要拿別張表當條件，請首選 EXISTS。
